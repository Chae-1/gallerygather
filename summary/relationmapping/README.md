연관관계 매핑
==
## 테이블과 객체의 다른점
- 테이블 
  - 외래키 하나로 양쪽으로 조인이 가능하다.
- 객체
  - 참조용 필드가 존재해야 다른 객체를 참조할 수 있다.
  - 한쪽만 참조했을 때 단방향
  - 양쪽이 참조하면 양방향이다.
  
## 연관관계의 주인
- 테이블은 외래키 하나로 두 테이블이 연관
- 객체는 양방향 관계를 갖을 수 있기 때문에 JPA에서 관계를 나타낼 때, 이를 활용한다.

## 다대일(@ManyToOne)
- 

## 일대다(@OneToMany)
- 일대다 단방향은 일대다에서 1이 연관관계의 주인이다.
- 테이블의 일대다 관계는 항상 N쪽에 외래키가 존재한다.
- 객체, 테이블의 차이때문에 반대편 테이블의 외래키를 관리하는 구조
- @JoinColumn 반드시 사용해야함.

### 단점
- 엔터티가 관리하는 외래 키가 다른 테이블에 있음.
- 연관관계 관리를 위해 추가로 UPDATE SQL 실행
- **다대일 양방향 매핑** 사용 권장

## 일대일 관계(@OneToOne)
- 주 테이블이나 대상 테이블 중 외래키 선택 가능.
- 주 테이블에 외래키를 달거나, 대상 테이블에 외래키를 달거나.

### 일대일 관계 반대 테이블
- 테이블의 외래 키와 반대로 연관관계의 주인으로 설정하면 JPA에서는 인식 못함.
- 이때는, 일대일 양방향 관계를 통해 대상 테이블을 연관 관계의 주인으로 설정한다.

- 주 테이블에 외래 키
  - 주 객체가 대상 객체의 참조를 가지는 것 처럼 주 테이블에 외래 키를 두고 대상 테이블을 찾음.
  - 장점 : 주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능
  - 단점 : 실제 DB에 외래 키 값이 null이 들어가는 것을 허용해야한다.
- 대상 테이블에 외래 키
  - 대상 테이블에 외래 키가 존재
  - 장점 : 주 테이블과 대상 테이블을 일대일에서 다대일로 변경할 때 테이블 구조가 유지
  - 단점 : 프록시 기능 한계로 지연 로딩으로 설정해도 항상 즉시 로딩된다.


## 다대다 관계(@ManyToMany)
- 실제로 데이터베이스 테이블에서 조인 테이블로 다대다 관계를 표현한다.
- 해당 기능은 사용하지 않는다.


